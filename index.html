<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="pageTitle">肥料计算器</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="main.js" defer></script>
</head>
<body>

    <div class="container">
        <div class="header">
            <h1 data-lang-key="appTitle">肥料计算器</h1>
            <div>
                <button id="admin-panel-btn" class="btn" data-lang-key="adminPanelBtn">管理面板</button>
                <button id="lang-switcher" class="btn" style="margin-left: 10px;">English</button>
            </div>
        </div>

        <!-- Master Fertilizer List -->
        <div class="card">
            <h2 data-lang-key="masterListTitle">可用肥料 (主列表)</h2>
            <div id="master-list-container" class="table-container">
                <div class="loader" data-lang-key="loadingMaster">正在加载主列表...</div>
            </div>
        </div>

        <!-- Saved Calculations -->
        <div class="card">
            <h2 data-lang-key="savedCalcsTitle">我保存的计算</h2>
            <div id="saved-calculations-list">
                <div class="loader" data-lang-key="loadingSaved">正在加载已保存的计算...</div>
            </div>
        </div>
    </div>

    <!-- Admin Panel Modal -->
    <div id="admin-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" data-modal-id="admin-modal">&times;</span>
            <h2 data-lang-key="adminModalTitle">添加新肥料到主列表</h2>
            <form id="admin-form">
                <div class="form-group">
                    <label for="brand" data-lang-key="brandLabel">品牌名称</label>
                    <input type="text" id="brand" required>
                </div>
                <div class="form-group">
                    <label for="packetWeight" data-lang-key="weightLabel">包装重量 (公斤)</label>
                    <input type="number" id="packetWeight" step="any" required>
                </div>
                <div class="form-group">
                    <label for="packetPrice" data-lang-key="priceLabel">每包价格 (RM)</label>
                    <input type="number" id="packetPrice" step="any" required>
                </div>
                <hr>
                <h3 data-lang-key="nutrientTitle">营养成分 (%)</h3>
                <div id="admin-nutrient-list" class="nutrient-grid">
                    <!-- Nutrient fields for admin will be generated here -->
                </div>
                <br>
                <button type="submit" class="btn" data-lang-key="saveToMasterBtn">保存到主列表</button>
            </form>
        </div>
    </div>

    <!-- Calculation Modal -->
    <div id="calculation-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" data-modal-id="calculation-modal">&times;</span>
            <h2 id="calculation-modal-title">新计算</h2>
            <form id="calculation-form">
                <input type="hidden" id="master-fertilizer-id">
                <input type="hidden" id="calculation-id">
                <div class="form-group">
                    <label for="calculationName" data-lang-key="calcNameLabel">计算名称 (例如, "A区 - 幼树")</label>
                    <input type="text" id="calculationName" required>
                </div>
                <div class="form-group">
                    <label for="trees" data-lang-key="treesLabel">树木数量</label>
                    <input type="number" id="trees" required>
                </div>
                <div class="form-group">
                    <label for="rate" data-lang-key="rateLabel">施肥量 (公斤/棵)</label>
                    <input type="number" id="rate" step="any" required>
                </div>
                <div class="form-group">
                    <label for="frequency" data-lang-key="freqLabel">年施肥次数</label>
                    <input type="number" id="frequency" required>
                </div>
                <button type="submit" class="btn" data-lang-key="saveCalcBtn">保存计算</button>
            </form>
        </div>
    </div>

</body>
</html>
