<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fertilizer Calculator</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="main.js" defer></script>
</head>
<body>

    <div class="container">
        <div class="header">
            <h1>Fertilizer Calculator</h1>
            <button id="admin-panel-btn" class="btn">Admin Panel</button>
        </div>

        <!-- Master Fertilizer List -->
        <div class="card">
            <h2>Available Fertilizers (Master List)</h2>
            <div id="master-list-container" class="table-container">
                <!-- Master table will be rendered here by JS -->
                <div class="loader">Loading master list...</div>
            </div>
        </div>

        <!-- Saved Calculations -->
        <div class="card">
            <h2>My Saved Calculations</h2>
            <div id="saved-calculations-list">
                <!-- Saved calculations will be rendered here by JS -->
                <div class="loader">Loading saved calculations...</div>
            </div>
        </div>
    </div>

    <!-- Admin Panel Modal -->
    <div id="admin-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" data-modal-id="admin-modal">&times;</span>
            <h2>Add New Fertilizer to Master List</h2>
            <form id="admin-form">
                <div class="form-group">
                    <label for="brand">Brand Name</label>
                    <input type="text" id="brand" required>
                </div>
                <div class="form-group">
                    <label for="packetWeight">Packet Weight (kg)</label>
                    <input type="number" id="packetWeight" step="any" required>
                </div>
                <div class="form-group">
                    <label for="packetPrice">Price per Packet (RM)</label>
                    <input type="number" id="packetPrice" step="any" required>
                </div>
                <hr>
                <h3>Nutrient Content (%)</h3>
                <div id="admin-nutrient-list" class="nutrient-grid">
                    <!-- Nutrient fields for admin will be generated here -->
                </div>
                <br>
                <button type="submit" class="btn">Save to Master List</button>
            </form>
        </div>
    </div>

    <!-- Calculation Modal -->
    <div id="calculation-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" data-modal-id="calculation-modal">&times;</span>
            <h2 id="calculation-modal-title">New Calculation</h2>
            <form id="calculation-form">
                <input type="hidden" id="master-fertilizer-id">
                <input type="hidden" id="calculation-id">
                <div class="form-group">
                    <label for="calculationName">Calculation Name (e.g., "Block A - Young Trees")</label>
                    <input type="text" id="calculationName" required>
                </div>
                <div class="form-group">
                    <label for="trees">Number of Trees</label>
                    <input type="number" id="trees" required>
                </div>
                <div class="form-group">
                    <label for="rate">Fertilizer Rate (kg/tree)</label>
                    <input type="number" id="rate" step="any" required>
                </div>
                <div class="form-group">
                    <label for="frequency">Applications per Year</label>
                    <input type="number" id="frequency" required>
                </div>
                <button type="submit" class="btn">Save Calculation</button>
            </form>
        </div>
    </div>

</body>
</html>